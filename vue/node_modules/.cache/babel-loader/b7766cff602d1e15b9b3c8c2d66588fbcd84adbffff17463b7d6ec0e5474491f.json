{"ast":null,"code":"import request from \"@/utils/request\";\nexport default {\n  name: 'AddTrouble',\n  data() {\n    return {\n      form: {},\n      stations: [],\n      rules: {\n        stationNumber: [{\n          required: true,\n          message: '请输入电站编号',\n          trigger: 'blur'\n        }],\n        troubleDescribe: [{\n          required: true,\n          message: '请输入故障描述',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    request.get('/station/page').then(res => {\n      this.stations = res.data.list;\n    });\n  },\n  methods: {\n    save() {\n      this.$refs['ruleForm'].validate(valid => {\n        if (valid) {\n          request.post('/trouble/save', this.form).then(res => {\n            if (res.code === '200') {\n              this.$notify.success('新增成功');\n              this.$refs['ruleForm'].resetFields();\n            } else {\n              this.$notify.error(res.msg);\n            }\n          });\n        }\n      });\n    },\n    selectStationByNumber() {\n      const station = this.stations.find(v => v.stationNumber === this.form.stationNumber);\n      request.get('/station/' + station.stationNumber).then(res => {\n        this.$set(this.form, 'stationName', res.data.stationName);\n        this.form.stationAddress = res.data.stationAddress;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AA0CA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC,gBACA;UAAAC;UAAAC;UAAAC;QAAA,EACA;QACAC,kBACA;UAAAH;UAAAC;UAAAC;QAAA;MAEA;IACA;EACA;EACAE;IACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;QACA;UACAF;YACA;cACA;cACA;YACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAG;MACA;MACAH;QACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","form","stations","rules","stationNumber","required","message","trigger","troubleDescribe","created","request","methods","save","selectStationByNumber"],"sourceRoot":"src/views/station","sources":["trouble.vue"],"sourcesContent":["<template>\r\n  <div style=\"width: 80%\">\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>电站管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>故障上报</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-form style=\"margin-top: 50px\" :inline=\"true\" :model=\"form\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\">\r\n      <el-form-item label=\"电站编号\" prop=\"stationNumber\">\r\n        <el-select v-model=\"form.stationNumber\"  filterable placeholder=\"请选择电站编号\" @change=\"selectStationByNumber\">\r\n          <el-option\r\n              v-for=\"item in stations\"\r\n              :key=\"item.stationId\"\r\n              :label=\"item.stationNumber\"\r\n              :value=\"item.stationNumber\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"电站名称\" prop=\"stationName\">\r\n        <el-input v-model=\"form.stationName\" disabled></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"电站地址\" prop=\"stationAddress\">\r\n        <el-input v-model=\"form.stationAddress\" disabled></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"故障描述\" prop=\"troubleDescribe\">\r\n        <el-input\r\n            style=\"width: 700px\"\r\n            type=\"textarea\"\r\n            :rows=\"2\"\r\n            placeholder=\"请输入故障描述\"\r\n            v-model=\"form.troubleDescribe\">\r\n        </el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div style=\"text-align: center; margin-top: 30px\">\r\n      <el-button type=\"primary\" @click=\"save\" size=\"medium\">提交</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  name: 'AddTrouble',\r\n  data() {\r\n    return {\r\n      form: {},\r\n      stations:[],\r\n      rules: {\r\n        stationNumber: [\r\n          { required: true, message: '请输入电站编号', trigger: 'blur'},\r\n        ],\r\n        troubleDescribe:[\r\n          { required: true, message: '请输入故障描述', trigger: 'blur'}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    request.get('/station/page').then(res => {\r\n      this.stations = res.data.list\r\n    })\r\n  },\r\n  methods: {\r\n    save() {\r\n      this.$refs['ruleForm'].validate((valid) => {\r\n        if (valid) {\r\n          request.post('/trouble/save', this.form).then(res => {\r\n            if (res.code === '200') {\r\n              this.$notify.success('新增成功')\r\n              this.$refs['ruleForm'].resetFields()\r\n            } else {\r\n              this.$notify.error(res.msg)\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    selectStationByNumber(){\r\n      const station = this.stations.find(v => v.stationNumber === this.form.stationNumber)\r\n      request.get('/station/' + station.stationNumber).then(res =>{\r\n        this.$set(this.form, 'stationName', res.data.stationName)\r\n        this.form.stationAddress = res.data.stationAddress\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}